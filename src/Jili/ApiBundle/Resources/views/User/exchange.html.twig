<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>积粒网-兑换历史</title>
<!-- [if lt IE9] -->
<script src="{{ asset('js/html5.js')}}" type="text/javascript"></script>
<!-- [endif] -->
<link href="{{ asset('css/default.css')}}" rel="stylesheet" type="text/css" />
<link href="{{ asset('css/personalAside.css')}}" rel="stylesheet" type="text/css" />
<link href="{{ asset('css/history.css')}}" rel="stylesheet" type="text/css" />
<link href="{{ asset('css/pageNav.css')}}" rel="stylesheet" type="text/css" />
<script src="{{ asset('js/jquery-1.7.js')}}" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
	var url = window.location.href;
    url = url.split("exchange/");
    url = url[1].substring(0,1);
    $("div article .screen a").removeClass("hover"); 
    if(url){
    	switch(url){
        case "0":
            $("div article .screen a:last").addClass("hover"); 
            break;
        case "1":
            $("div article .screen a:first").addClass("hover"); 
            break;
        case "2":
            $("div article .screen a:eq(1)").addClass("hover");
            break; 
        case "3":
            $("div article .screen a:eq(2)").addClass("hover"); 
            break;
        default:
        	location.href="{{ path('_user_adtaste',{'type': 0}) }}";
            break;
        }
    }
});
function addClass(type){
	switch(type){
        case 0:
        	location.href="{{ path('_user_exchange',{'type': 0}) }}";
        	break;
        case 1:
        	location.href="{{ path('_user_exchange',{'type': 1}) }}";
        	break;
        case 2:
        	location.href="{{ path('_user_exchange',{'type': 2}) }}";
        	break;
        case 3:
        	location.href="{{ path('_user_exchange',{'type': 3}) }}";
        	break;
        default:
        	location.href="{{ path('_user_exchange',{'type': 0}) }}";
            break;
	}
}
</script>
</head>
<body>
{% include 'JiliApiBundle::header.html.twig' %}
<div class="webArticle history">
  <h2><span><img src="{{ asset('images/exchangeHistory.gif')}}" alt="兑换历史"></span></h2>
  <aside>
  {% include 'JiliApiBundle:User:rightInfo.html.twig' %}
  </aside>
  <article>
  	<div class="screen">
  	<a href="javascript:void(0);" class="hover" onclick="addClass(1);return false;">近30天</a>
  	<a href="javascript:void(0);" onclick="addClass(2);return false;">过去6个月内</a>
  	<a href="javascript:void(0);" onclick="addClass(3);return false;">过去1年内</a>
  	<a href="javascript:void(0);" onclick="addClass(0);return false;">全部</a>
  	</div>
    <table>
    	<tr>
        	<th>兑换申请时间</th>
            <th>兑换方式</th>
            <th>米粒数</th>
            <th>兑换完成时间</th>
            <th>状态</th>
        </tr>
      {% if exchange %}
         {% for item in pagination %}
          <tr>
            <td>{{ item.exchangeDate.date }}</td>
            <td>{{ item.type }}</td>
            <td>{{ item.targetPoint }}</td>
            <td>{% if item.status %} {{ item.finishDate.date }} {% else %} {% endif %}</td>
            <td>{% if item.status %} 兑换成功  {% else %} 处理中 {% endif %}</td>
          </tr>
          {% endfor %}
      {% else %}
        <tr><td align="center" colspan="5">没有兑换记录</td></tr>
      {% endif %}
       
    </table>
    {{ knp_pagination_render(pagination) }}
   
  </article>
</div>
{% include 'JiliApiBundle::footer.html.twig' %}
</body>
</html>

