<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>积粒网-任务历史</title>
<!-- [if lt IE9] -->
<script src="{{ asset('js/html5.js')}}" type="text/javascript"></script>
<!-- [endif] -->
<link href="{{ asset('css/default.css')}}" rel="stylesheet" type="text/css" />
<link href="{{ asset('css/personalAside.css')}}" rel="stylesheet" type="text/css" />
<link href="{{ asset('css/history.css')}}" rel="stylesheet" type="text/css" />
<link href="{{ asset('css/pageNav.css')}}" rel="stylesheet" type="text/css" />
<script src="{{ asset('js/jquery-1.7.js')}}" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
	var url = window.location.href;
    url = url.split("adtaste/");
    url = url[1].substring(0,1);
    $("div article .screen a").removeClass("hover"); 
    if(url){
    	switch(url){
        case "0":
            $("div article .screen a:last").addClass("hover"); 
            break;
        case "1":
            $("div article .screen a:first").addClass("hover"); 
            break;
        case "2":
            $("div article .screen a:eq(1)").addClass("hover");
            break; 
        case "3":
            $("div article .screen a:eq(2)").addClass("hover"); 
            break;
       default:
        	location.href="{{ path('_user_adtaste',{'type': 0}) }}";
            break;
        }
    }
});
function addClass(type){
	switch(type){
        case 0:
        	location.href="{{ path('_user_adtaste',{'type': 0}) }}";
        	break;
        case 1:
        	location.href="{{ path('_user_adtaste',{'type': 1}) }}";
        	break;
        case 2:
        	location.href="{{ path('_user_adtaste',{'type': 2}) }}";
        	break;
        case 3:
        	location.href="{{ path('_user_adtaste',{'type': 3}) }}";
        	break;
        default:
        	location.href="{{ path('_user_adtaste',{'type': 0}) }}";
            break;
	}
}
</script>
</head>
<body>
{% include 'JiliApiBundle::header.html.twig' %}
<div class="webArticle history">
  <h2><span><img src="{{ asset('images/taskHistory.gif')}}" alt="任务历史"></span></h2>
  <aside>
{% include 'JiliApiBundle:User:rightInfo.html.twig' %}
  </aside>
  <article>
  	<div class="screen">
    <p class="prompt">商家审核需要8周，判定有效后立即到账（退货无返利）</p>
  	<a href="javascript:void(0);" class="hover" onclick="addClass(1);return false;">近30天</a>
  	<a href="javascript:void(0);" onclick="addClass(2);return false;">过去6个月内</a>
  	<a href="javascript:void(0);" onclick="addClass(3);return false;">过去1年内</a>
  	<a href="javascript:void(0);" onclick="addClass(0);return false;">全部</a>
  	</div>
    <table>
    	<tr>
        	<th>任务类型</th>
            <th>任务名称</th>
            <th>奖励米粒</th>
            <th>任务领取时间</th>
            <th>任务状态</th>
        </tr>
        {% if pagination %}
         {% for item in pagination %}
        <tr>
          <td>
         {{ item.displayName }}
          </td>
          <td>{% if item.adid %}<a href="{{ path('_advertiserment_index',{'id':item.adid}) }}" target="_blank">{{ item.title }}</a>
              {% else%}
              <a href="{{ path('_game_index') }}" target="_blank">{{ item.title }}</a>
              {% endif %} 
          </td>
          <td>{% if item.incentiveType==2 %}
                     {% if item.orderStatus > 1 %}
                        {{ item.incentive }}米粒
                     {% else %}
                     {% endif %}
              {% else %}
                     {{ item.incentive }}米粒
              {% endif %}</td>
          <td>{% if item.createTime %}{{ item.createTime.date }}{% endif %}</td>
          <td>{% if item.incentiveType==1 or item.incentiveType==2 %}
                  {% if item.orderStatus==1  %} 已参加
                  {% elseif item.orderStatus==2  %} 确认中
                  {% elseif item.orderStatus==3  %} 已完成
                  {% elseif item.orderStatus==4  %} 任务失败
                  {% else %}{% endif %}
                  {% else %}
                  {% if item.orderStatus==0  %} 确认中
                  {% elseif item.orderStatus==1  %} 已完成
                  {% else %} 任务失败
                  {% endif %}
              {% endif %}
          </td>
        </tr>
         {% endfor %}
       {% else %}
      <tr><td align="center" colspan="5">没有任务记录</td></tr>
      {% endif %}
         
    </table>
    {{ knp_pagination_render(pagination) }}
  </article>
</div>
{% include 'JiliApiBundle::footer.html.twig' %}
</body>
</html>
 
 