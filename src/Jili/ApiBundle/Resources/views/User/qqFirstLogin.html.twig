<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>积粒网-QQ注册</title>
        {% include 'JiliApiBundle::seo.html.twig' %}
        <!-- [if lt IE9] -->
        <script src="{{ asset('js/html5.js')}}" type="text/javascript"></script>
        <!-- [endif] -->
        <link href="{{ asset('css/default.css')}}" rel="stylesheet" type="text/css" />
        <link href="{{ asset('css140307/common.css')}}" rel="stylesheet" type="text/css" />
        <link href="{{ asset('css/aside.css')}}" rel="stylesheet" type="text/css" />
        <link href="{{ asset('css/regStep.css')}}" rel="stylesheet" type="text/css" />
        <script src="{{ asset('js/jquery-1.7.js')}}" type="text/javascript"></script>
        <script src="{{ asset('js/banner.js')}}" type="text/javascript"></script>
    </head>
    <body>
        {% include 'JiliApiBundle::userHead.html.twig' %}
        <div class="webArticle regStep">
            <article>
                <div class="regForm qqRegForm" style="padding-top:100px;">
                    <h2 class="fontYH">尊敬的QQ会员，欢迎来到积粒网！</h2>
                    <div class="qqReg">
                        {# if( newregist )#}
                        <span class="noJl fontYH">没有积粒网账号</span>
                        <form action="{{ path('qq_registe') }}" method="post" name="form1" id="form1" >
                            <ul class="addAccount">
                                <li>您的基本信息</li>
                                <li class="qqMsg"><span><img height="48" src="/images1408/headPortBg.jpg"></span>
                                    <span>昵称：{{ nickname }}<br/>性别：{{ sex }}</span>
                                    <input type="hidden" name="qqnickname" value="{{ nickname }}"/>
                                    <input type="hidden" name="sex" value="{{ sex }}"/>
                                </li>
                                <li>您是首次来到积粒网，为保障您的账号安全，请设置QQ邮箱并且输入一个积粒网用的密码。</li>
                                <li><label for="qqEmail">邮箱地址：</label>{{ form_widget(form.email_id, { 'attr': {'class': 'qqEmail'} }) }}@qq.com</li>
                                <li><label for="setPwd">设置密码：</label><input name="pwd" type="password" value=""/></li>
                                <li>
                                    <strong class="errorMsg" id="regist_emailError">
                                        {% if regcode is  defined %}
                                            {{ regcode }}
                                        {% endif %}
                                    </strong>
                                </li>
                                <li><span class="submitBtn" id='reg' >立即注册</span></li>
                            </ul>
                            {{ form_rest(form) }}
                            <button style="display:none">register</button>
                        </form>
                        {# else bind jili id#}
                        <span class="Jl fontYH">已有积粒网账号</span>
                        <form action="{{ path('qq_bind') }}" method="post" name="form2" id="form2" >
                            <ul class="bindAccount">
                                <li>将已有的积粒网账号与QQ账号绑定</li>
                                <li><label for="kxUser">积粒账号：</label><input name="jili_email" type="text" value="{{ email }}"/>
                                    <strong class="errorMsg" id="bind_emailError">
                                        {% if bindcode is  defined %}
                                            {{ bindcode }}
                                        {% endif %}
                                    </strong></li>
                                <li><label for="kxPwd">登录密码：</label><input id="pwd" name="jili_pwd" type="password" value=""/>{% if 1 %}
                                    {# if code_nick #}
                                    <strong class="errorMsg" id="nickError">{# code_nick #}</strong>
                                    {% else %}2-20个字符
                                        {% endif %}</li>
                                        <br />
                                        <li><span id='bind' class="submitBtn">立即绑定</span><a class="corGlobBlue" href="{{ path('_user_resetPwd') }}">忘记密码</a></li>
                                    </ul>
                                    <button style="display:none">binding</button>
                                </form>
                                {#endif#}
                            </div>
                            <div class="qqPic">
                                <img src="/images140307/qqPic.jpg" width="343" height="100"/>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </article>
                </div>
                {% include 'JiliApiBundle::userFoot.html.twig' %}
            </body>
            <script type="text/javascript">
                function refresh() {
                    document.getElementById("verificationImg").src = '{{  path('_user_captcha') }}?r=' + 100000 * Math.random();
                }
                $(document).ready(function () {
                    $("#reg").click(function () {
                        $("#form1").submit();
                    });
                    $("#bind").click(function () {
                        $("#form2").submit();
                    });
                    $('.qqReg>span').addClass('corGlobBlue');
                    $('.qqReg>span').on('click', function () {
                        var $this = $(this);
                        var $bind = $('.bindAccount');
                        var $add = $('.addAccount');
                        $('.qqReg>span').removeClass('corGlobBlue');
                        $('.qqReg>span').addClass("corLightGray");
                        $('.qqReg>span').removeClass('active');
                        $this.addClass('active');
                        if ($this.hasClass('noJl')) {
                            $bind.hide();
                            $add.show();
                        } else {
                            $add.hide();
                            $bind.show();
                        }
                    });
                });
               {% if regcode is defined %}
                var $add = $('.addAccount');
                $add.show();
               {% endif %}

                {% if bindcode is  defined %}
                var $bind = $('.bindAccount');
                $bind.show();
                {% endif %}
            </script>
        </html>

