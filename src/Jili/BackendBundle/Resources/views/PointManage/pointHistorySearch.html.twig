{% extends 'WenwenFrontendBundle:admin:base.html.twig' %} 

{% block body %}
<p class="tips">注：email必须输入</p>
<table align="center" width="" class="search">
    <p>
        {% if message is defined %}
        <center>
            <font color='red'>{{message}}</font>
        </center>
        {% endif %}&nbsp;
    </p>
    <form action="{{ path('_admin_pointHistorySearch')}}" method="post" id="form1" }}>
        <tr>
            <td colspan="7" align="center">&nbsp;</td>
        </tr>
        <tr>
            <td colspan="7" align="center">
                积分类型:
                <select id="category_id" name="category_id">
                    <option value="0">请选择</option>
                    {% for item in categoryList %}
                    <option value="{{ item.id }}" {% if item.id==category_id %} selected="selected" {% endif %}>{{item.id }}-{{ item.categoryName }}{{ item.asp }}{{item.displayName }}</option>
                    {% endfor %}
                </select>&nbsp;&nbsp; email:
                <input type="text" id="email" name="email" value="{% if email %}{{ email }}{% endif %}" size="30" /> 开始时间:
                <input id="start" name="start_time" value="{% if start %}{{ start }}{% endif %}" size="18" maxlength="60" readonly="readonly" onclick="WdatePicker()" class="wdate" style="cursor: pointer" /> &nbsp; 结束时间:
                <input name="end_time" id="end" value="{% if end %}{{ end }}{% endif %}" size="18" maxlength="60" readonly="readonly" onclick="WdatePicker()" class="wdate" style="cursor: pointer" />&nbsp;
                <input type="button" id="select" name="select" value="查 询" />&nbsp;
            </td>
        </tr>
    </form>
    <tr>
        <td colspan="7">&nbsp;</td>
    </tr>
</table>
<table align="center" width="" class="list">
    <tr>
        <th>id</th>
        <th>user id</th>
        <th>point_change_num</th>
        <th>category type</th>
        <th>category name</th>
        <th>create_time</th>
    </tr>
    {% if pagination is defined %} {% for item in pagination %}
    <tr>
        <td align="center">{{ item.id }}</td>
        <td align="center">{{ item.userId }}</td>
        <td align="center">{{ item.pointChangeNum }}</td>
        <td align="center">{{ item.reason }}</td>
        <td align="center">{{ item.categoryName }}</td>
        <td align="center">{{ item.createTime | date('y-m-d h:i:s') }}
        </td>
    </tr>
    {% endfor %} {% endif %}
</table>

{% if pagination is defined %}{{ knp_pagination_render(pagination) }}{% endif %}
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
$(document).ready(function(){
  $("#select").click(function (){
      var email = $.trim($("#email").val());
      if( email == null || email == ""){
          alert("请输入email");
          return false;
      }
      window.location.href="{{ path('_admin_pointHistorySearch') }}?start="+$('#start').val()+"&end="+$('#end').val()+"&category_id="+$('#category_id').val()+"&email="+$('#email').val();
  })
});
</script>
{% endblock %}